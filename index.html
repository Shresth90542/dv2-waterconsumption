<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Malaysia Water: Production & Consumption</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Vega libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Dashboard styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <div class="page-header">
      <h1>Malaysia Water: Production &amp; Consumption</h1>
      <span class="badge">Dashboard</span>
    </div>
    <p class="note">
      Data: <code>water_production_2000_2019.csv</code>, <code>water_consumption.csv</code>.
    </p>

    <!-- 1 -->
    <h2 class="section-title">1) National Water Production (2000–2019)</h2>
    <div class="card">
      <div class="chart-head">
        <p class="chart-title">Malaysia — Total Water Production</p>
      </div>
      <div id="line"></div>
      <p class="caption">Annual water produced nationwide in million litres per day (MLD).</p>
    </div>

    <!-- 2 + 3 -->
    <h2 class="section-title">2–3) State Comparisons</h2>
    <div class="grid grid-2">
      <div class="card">
        <div class="chart-head"><p class="chart-title">Sectoral Water Consumption by State</p></div>
        <div id="bars"></div>
        <p class="caption">Stacked bars show Domestic vs Non-domestic consumption for the selected year.</p>
      </div>
      <div class="card">
        <div class="chart-head"><p class="chart-title">Production vs Total Consumption</p></div>
        <div id="scatter"></div>
        <p class="caption">Each dot is a state; the 45° diagonal indicates parity between production and consumption.</p>
      </div>
    </div>

    <!-- 4 -->
    <h2 class="section-title">4) Malaysia Consumption by Sector (2003–2022)</h2>
    <div class="card">
      <div class="chart-head"><p class="chart-title">Domestic &amp; Non-domestic Over Time</p></div>
      <div id="area"></div>
      <p class="caption">Area chart shows national consumption by sector (MLD).</p>
    </div>

    <!-- 5 -->
    <h2 class="section-title">5) State Consumption Trends (2003–2022)</h2>
    <div class="card">
      <div class="chart-head"><p class="chart-title">Water Consumption Trend by State</p></div>
      <div id="sparklines"></div>
      <p class="caption">Use the dropdown in the chart to switch states.</p>
    </div>

    <!-- 6 -->
    <h2 class="section-title">6) Change in Total Consumption — Compare Two Years</h2>
    <div class="card">
      <div class="chart-head"><p class="chart-title">Before–After (Dumbbell)</p></div>
      <div id="dumbbell"></div>
      <p class="caption">Use the sliders to compare two years; lines show magnitude of change by state.</p>
    </div>

    <!-- 7 -->
    <h2 class="section-title">7) Water Production by State (Map)</h2>
    <div class="card">
      <div class="chart-head"><p class="chart-title">Water Production by State (MLD)</p></div>
      <div id="map_prod"></div>
      <p class="caption">Choropleth shows state-level production; slider selects year.</p>
    </div>

    <!-- 8 -->
    <h2 class="section-title">8) Domestic Share of Consumption by State (Map)</h2>
    <div class="card">
      <div class="chart-head"><p class="chart-title">Domestic Share of Consumption (%)</p></div>
      <div id="map_share"></div>
      <p class="caption">Share of consumption served to the domestic sector; slider selects year.</p>
    </div>

    <hr class="sep">
    <p class="footer">Prepared for FIT3179 · Visualisation by &lt;Your Name&gt;</p>
  </div>

  <script>
    vegaEmbed('#line', 'linechart.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#bars', 'bars.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#scatter', 'scatter.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#area', 'area.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#sparklines', 'state_sparklines.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#dumbbell', 'change_dumbbell.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#map_prod', 'map_production.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#map_share', 'map_domestic_share.json', { actions: false, renderer: 'canvas' }).catch(console.error);
  </script>
</body>
</html>
