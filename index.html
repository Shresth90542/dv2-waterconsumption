<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Malaysia Water — Production & Consumption Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Vega libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="masthead">
    <div class="container masthead__inner">
      <div class="masthead__titles">
        <h1>Malaysia Water — Production &amp; Consumption</h1>
        <p class="subtitle">Trends, sectoral mix, state comparisons &amp; geospatial patterns (2000–2022)</p>
      </div>
      <span class="badge">Interactive</span>
    </div>
  </header>

  <main class="container">

    <!-- 1) Map first -->
    <section class="card">
      <h2 class="chart-heading">1) Total Water Consumption by State (Map)</h2>
      <div id="map_totals" class="viz viz--lg"></div>
      <p class="chart-desc">
        The choropleth map visualises the total daily water consumption (MLD) for each Malaysian state.
        Darker shades indicate higher overall usage, with <strong>Selangor</strong> leading significantly due to its
        population density and industrial concentration. In contrast, <strong>Perlis</strong> and <strong>Labuan</strong>
        exhibit lower demand, highlighting geographic disparities in water utilisation.
      </p>
    </section>

    <!-- 2) National production -->
    <section class="card">
      <h2 class="chart-heading">2) National Water Production (2000–2019)</h2>
      <div id="line" class="viz"></div>
      <p class="chart-desc">
        National production rose from ~<strong>10,000 MLD</strong> in 2000 to over <strong>17,000 MLD</strong> in 2019,
        indicating steady expansion of supply capacity. Minor year-to-year changes align with infrastructure upgrades
        and demand growth.
      </p>
    </section>

    <!-- 3–4) Two cards side-by-side on wide screens -->
    <section class="grid-2">
      <div class="card">
        <h2 class="chart-heading">3) Sectoral Water Consumption by State</h2>
        <div id="bars" class="viz viz--sm"></div>
        <p class="chart-desc">
          A comparison of <strong>domestic</strong> vs <strong>non-domestic</strong> demand by state.
          Selangor dominates total usage; Johor and Perak follow with more balanced sector splits.
        </p>
      </div>

      <div class="card">
        <h2 class="chart-heading">4) Water Production vs Total Consumption</h2>
        <div id="scatter" class="viz viz--sm"></div>
        <p class="chart-desc">
          Points near the diagonal indicate supply ≈ demand. States above the line suggest surplus production,
          while those below may face tighter supply relative to consumption.
        </p>
      </div>
    </section>

    <section class="card">
      <h2 class="chart-heading">5) Malaysia Consumption by Sector (2003–2022)</h2>
      <div id="area" class="viz"></div>
      <p class="chart-desc">
        Domestic use remains the largest component. Non-domestic consumption has grown since 2010,
        reflecting industrial and commercial expansion across key regions.
      </p>
    </section>

    <section class="card">
      <h2 class="chart-heading">6) State Consumption Trends (2003–2022)</h2>
      <div id="sparklines" class="viz"></div>
      <p class="chart-desc">
        Use the dropdown inside the chart to inspect a state’s trend. Most states show gradual growth; <strong>Selangor</strong>
        records the steepest long-run increase, consistent with population and economic activity.
      </p>
    </section>

    <section class="card">
      <h2 class="chart-heading">7) Change in Total Consumption — Compare Two Years</h2>
      <div id="dumbbell" class="viz viz--sm"></div>
      <p class="chart-desc">
        The dumbbell view contrasts two selected years. Longer lines indicate larger shifts in demand;
        growth is led by <strong>Selangor</strong> and <strong>Johor</strong>.
      </p>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container site-footer__inner">
      <p>
        <strong>Data sources:</strong>
        <code>state_totals.csv</code>,
        <code>water_production_2000_2019.csv</code>,
        <code>water_consumption.csv</code>
      </p>
      <p>Prepared by <strong>Shresth Sohaney</strong> (Student ID: <strong>33806314</strong>)</p>
    </div>
  </footer>

  <script>
    vegaEmbed('#map_totals', 'map_totals.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#line', 'linechart.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#bars', 'bars.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#scatter', 'scatter.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#area', 'area.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#sparklines', 'state_sparklines.json', { actions: false, renderer: 'canvas' }).catch(console.error);
    vegaEmbed('#dumbbell', 'change_dumbbell.json', { actions: false, renderer: 'canvas' }).catch(console.error);
  </script>
</body>
</html>
